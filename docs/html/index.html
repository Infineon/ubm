<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UBM Middleware</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UBM Middleware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">UBM Middleware Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="section_mainpage_overview"></a>
Overview</h1>
<p>The implementation of the UBM middleware for ModusToolbox&trade; is currently at the Preliminary level. Features may change without notice. Contact <a href="https:/\/www.infineon.com/cms/en/about-infineon/company/contacts/support/"><b>Infineon Product Support</b></a> for additional details.</p>
<p>The UBM middleware provides the implementation of the Universal Backplane Management (UBM) - a common backplane management framework for a host to determine SAS/SATA/PCIe backplane capabilities, Drive Facing Connector (DFC) Status and Control information, and to read the port routing of the Drive Facing Connectors to Host Facing Connectors (HFC) of the backplane.</p>
<p><b>Features:</b></p><ul>
<li>Status and Control over Drive Facing Connector I/O</li>
<li>High speed lane port routing assignments to Host Facing Connectors</li>
<li>Backplane capabilities including:<ul>
<li>PCIe Reference Clock expectations</li>
<li>PCIe Reset expectations</li>
<li>Power Disable support</li>
<li>Dual Port support</li>
</ul>
</li>
<li>Controller programmable firmware update</li>
</ul>
<h1><a class="anchor" id="section_ubm_general"></a>
General Description</h1>
<p>Include mtb_ubm.h to get access to all the functions and other declarations in this middleware.</p>
<p>See the <a class="el" href="index.html#subsection_ubm_bootloader">Basic UBM application with Update mode</a> to start with the bootloader application and the <a class="el" href="index.html#subsection_ubm_main">UBM Controller Application</a> for the main application.</p>
<p>Refer to the <a href="https://members.snia.org/document/dl/27167"><b>SFF-TA-1005</b></a> for the UBM specification. Refer to the release notes for limitations and compatibility information.</p>
<h1><a class="anchor" id="section_ubm_quick_start"></a>
Quick Start Guide</h1>
<h2><a class="anchor" id="subsection_ubm_bootloader"></a>
Basic UBM application with Update mode</h2>
<p>The UBM Middleware supports Update mode. This feature is based on the MCUBoot bootloader, and the transport layer, which provides UBM Middleware for transferring a new application image to the slot. </p><dl class="section note"><dt>Note</dt><dd>Strongly recommended - learn more about MCUBoot and multi-application projects from the following sources:<ol type="1">
<li><a href="https://github.com/mcu-tools/mcuboot/tree/main/docs">MCUBoot documentation</a></li>
<li><a href="https://github.com/mcu-tools/mcuboot/tree/cypress/boot/cypress/MCUBootApp">MCUBoot/Infineon</a></li>
<li><a href="https://github.com/Infineon/mtb-example-psoc6-mcuboot-basic">MCUBoot basic application</a></li>
<li><a href="https://www.infineon.com/dgdl/Infineon-AN215656_PSoC_6_MCU_Dual-CPU_System_Design-ApplicationNotes-v09_00-EN.pdf?fileId=8ac78c8c7cdc391c017d0d3180c4655f&amp;utm_source=cypress&amp;utm_medium=referral&amp;utm\_campaign=202110_globe_en_all_integration-application_note">Dual application guide</a></li>
</ol>
</dd></dl>
<p>Using this <a href="https://github.com/Infineon/cce-mtb-psoc61-mcuboot-bootloader">guide</a> to create two applications:</p><ul>
<li>The bootloader - is a program that checks the slots in the flash memory and downloads a new firmware image if it finds one.</li>
<li>The blinky application - is the user's main application that will be updated to run UBM Middleware.</li>
</ul>
<p>After creating a sample project:</p><ul>
<li>Update “bootloader” application with the changes mentioned in "Basic UBM application with Update mode".</li>
<li>Replace main.c of “blinky” application with the changes mentioned in "UBM Controller Application"</li>
</ul>
<ol type="1">
<li>Include the UBM middleware into the project using the ModusToolbox&trade; Library Manager.</li>
<li>Copy the configuration file from <em> mtb_shared/ubm/release[version]/ubm_flash_map/[config].json </em> to the Bootloader application <em>"flashmap"</em> folder.</li>
<li>Update FLASH_MAP variable in <em>"shared_config.mk"</em> to previously copied JSON file <div class="fragment"><div class="line"><span class="preprocessor"># Flashmap JSON file name</span></div><div class="line"><span class="preprocessor">FLASH_MAP=psoc62_swap_single_custom.json</span></div></div><!-- fragment --></li>
<li>Update configurational defines in configurational file present in <em></em>[app_name]/blinky/imports/ubm/mtb_ubm_config.h:</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>The configurational file mtb_ubm_config.h is added to the Blinky application in folder "imports" after the UBM middleware is added using Library Manager and below values are auto updated, <div class="fragment"><div class="line"><span class="preprocessor">#define MTB_UBM_UPGRADE_AREA_START      (0x10018000U) </span></div></div><!-- fragment --> <div class="fragment"><div class="line"><span class="preprocessor">#define MTB_UBM_UPGRADE_AREA_SIZE          (0x20000U) </span></div></div><!-- fragment --> You should update these addresses when json configuration file is changed.</dd></dl>
<ol type="1">
<li>Update the main makefile of Blinky application - modify a rule for post-build process: <div class="fragment"><div class="line">POSTBUILD=\</div><div class="line">cp -f $(BINARY_OUT_PATH).hex $(BINARY_OUT_PATH)_raw.hex;\</div><div class="line">rm -f $(BINARY_OUT_PATH).hex;\</div><div class="line">$(CY_ELF_TO_HEX_TOOL) --change-addresses=$(HEADER_OFFSET) --<span class="keyword">remove</span>-section .cy_em_eeprom $(CY_ELF_TO_HEX_OPTIONS) $(BINARY_OUT_PATH).elf $(BINARY_OUT_PATH)_unsigned.hex;\</div><div class="line">$(PYTHON_PATH) $(IMGTOOL_PATH) $(SIGN_ARGS) $(BINARY_OUT_PATH)_unsigned.hex $(BINARY_OUT_PATH).hex;</div></div><!-- fragment --> <dl class="section warning"><dt>Warning</dt><dd>The cy_em_eeprom section must be deleted because it can break the signing process. </dd>
<dd>
Known issue: The main Makefile of Blinky application has one incorrect path. Change this path: <div class="fragment"><div class="line">ALL_FILES=*</div><div class="line"><span class="preprocessor"># Correct path:</span></div><div class="line">SOURCES+=$(wildcard $(SEARCH_mcuboot)/boot/bootutil/src/$(ALL_FILES).c)\</div><div class="line">         $(wildcard $(MCUBOOT_CY_PATH)/libs/watchdog/$(ALL_FILES).c)\</div><div class="line">         $(wildcard $(MCUBOOT_CY_PATH)/platforms/img_confirm/$(FAMILY)/$(ALL_FILES).c)</div></div><!-- fragment --></dd></dl>
</li>
<li>Update the <em>main.c</em> file in Blinky application as it described <a class="el" href="index.html#subsection_ubm_main">UBM Controller Application</a>. </li>
</ol>
<h2><a class="anchor" id="subsection_ubm_main"></a>
UBM Controller Application</h2>
<ol type="1">
<li>When the UBM middleware was added into the project the configurational file <em>mtb_ubm_config.h</em> was added to the Blinky application into the <em>"imports"</em> folder. This file contains main configurational defines, e.g. the number of the HFCs or the number of DFCs, etc. Update the necessary parameters according to your backplane configuration. Example for 2 HFCs, 2 DFCs and 2 Routes: <div class="fragment"><div class="line"><span class="preprocessor">#define MTB_UBM_HFC_NUM       (2U)      </span><span class="comment">/* The number of the HFCs in the backplane */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define MTB_UBM_DFC_NUM       (2U)      </span><span class="comment">/* The number of the DFCs in the backplane */</span><span class="preprocessor"></span></div><div class="line"><span class="preprocessor">#define MTB_UBM_ROUTES_NUM    (2U)      </span><span class="comment">/* The number of the routes in the backplane */</span><span class="preprocessor"></span></div></div><!-- fragment --></li>
<li>Include the UBM middleware header file in your <em>main.c</em> file: <div class="fragment"><div class="line"><span class="preprocessor">#include &quot;mtb_ubm.h&quot;</span></div></div><!-- fragment --></li>
<li>Add the <a class="el" href="group__group__ubm__functions.html#ga43df57e2083f27ae7cb8ed1493c96a17" title="Initializes the UBM middleware. ">mtb_ubm_init()</a> function call in your <em>main.c</em> file, for example: <div class="fragment"><div class="line"><span class="keywordtype">bool</span> sts = <a class="code" href="group__group__ubm__functions.html#ga43df57e2083f27ae7cb8ed1493c96a17">mtb_ubm_init</a>(&amp;ubm_backplane_configuration, &amp;ubm_backplane_control_signals, &amp;ubm_context);</div></div><!-- fragment --></li>
<li>The following parameters are requred for the <a class="el" href="group__group__ubm__functions.html#ga43df57e2083f27ae7cb8ed1493c96a17" title="Initializes the UBM middleware. ">mtb_ubm_init()</a> function: <div class="fragment"><div class="line"><a class="code" href="structmtb__stc__ubm__backplane__cfg__t.html">mtb_stc_ubm_backplane_cfg_t</a> ubm_backplane_configuration;</div><div class="line"><a class="code" href="structmtb__stc__ubm__backplane__control__signals__t.html">mtb_stc_ubm_backplane_control_signals_t</a> ubm_backplane_control_signals;</div><div class="line">mtb_stc_ubm_context_t ubm_context;</div></div><!-- fragment --></li>
<li>The first parameter <a class="el" href="structmtb__stc__ubm__backplane__cfg__t.html" title="UBM backplane configuration structure. ">mtb_stc_ubm_backplane_cfg_t</a> contains the configurational values requred to set up the UBM middleware, e.g: <div class="fragment"><div class="line"><a class="code" href="structmtb__stc__ubm__backplane__cfg__t.html">mtb_stc_ubm_backplane_cfg_t</a> ubm_backplane_configuration =</div><div class="line">{</div><div class="line">    .<a class="code" href="structmtb__stc__ubm__backplane__cfg__t.html#aa181c80ab23238debe6079985be9f3f9">fru_config</a> = &amp;eepromConfig,            <span class="comment">/* Storage configuration for the FRU */</span></div><div class="line">    .overview_area = &amp;overview_area,        <span class="comment">/* Overview area configuration */</span></div><div class="line">    .hpt0_signal_support = <span class="keyword">true</span>,            <span class="comment">/* Indicates if HPT0 signal is routed in the backplane */</span></div><div class="line">    .starting_slot = 0x00U,                 <span class="comment">/* UBM starting slot */</span></div><div class="line">    .silicon_identity =</div><div class="line">    {</div><div class="line">        .pcie_vendor_id = 0xaa55,           <span class="comment">/* PCIe Vendor ID */</span></div><div class="line">        .device_code = 0xface8d00,          <span class="comment">/* UBM Controller Device code */</span></div><div class="line">        .fw_version_minor = 0x12,           <span class="comment">/* UBM Controller Image Version Minor */</span></div><div class="line">        .fw_version_major = 0x21,           <span class="comment">/* UBM Controller Image Version Minor */</span></div><div class="line">        .vendor_specific = 0x1234,          <span class="comment">/* UBM Controller vendor-specific data */</span></div><div class="line">    },</div><div class="line">    .backplane_info =</div><div class="line">    {</div><div class="line">        .backplane_type = 0x05U,            <span class="comment">/* Backplane type */</span></div><div class="line">        .backplane_number = 0x0AU,          <span class="comment">/* Backplane number */</span></div><div class="line">    },</div><div class="line">    .capabilities =</div><div class="line">    {</div><div class="line">        .clock_routing = <span class="keyword">true</span>,              <span class="comment">/* Indicates availability of high speed differential clock routing (i.e., RefClk) </span></div><div class="line"><span class="comment">                                               from the Host Facing Connector to the Drive Facing Connector */</span></div><div class="line">        .slot_power_control = <span class="keyword">true</span>,         <span class="comment">/* Indicates if the Drive Facing Connectors support Power Disable (i.e., PwrDIS signal) */</span></div><div class="line">        .pcie_reset_control = <span class="keyword">true</span>,         <span class="comment">/* Indicates if PCIe Reset Control is supported */</span></div><div class="line">        .dual_port = <span class="keyword">true</span>,                  <span class="comment">/* Indicates if Dual Port DFC connectors are routed */</span></div><div class="line">        .i2c_reset_operation = MTB_UBM_CAP_2WIRE_RESET_OP_FRU_CONTROLLER, <span class="comment">/* Indicates the 2WIRE_RESET# signal support */</span></div><div class="line">        .change_detect_interrupt = <span class="keyword">true</span>,    <span class="comment">/* Indicates if the CHANGE_DETECT# signal interrupt operation is supported */</span></div><div class="line">        .dfc_change_count = <span class="keyword">true</span>,           <span class="comment">/* Indicates if the change count is maintained per individual DFC Status and Control Command Descriptor */</span></div><div class="line">        .prsnt_reported = <span class="keyword">true</span>,             <span class="comment">/* Indicates if the PRSNT# signal is reported */</span></div><div class="line">        .ifdet_reported = <span class="keyword">true</span>,             <span class="comment">/* Indicates if the IFDET# signal is reported */</span></div><div class="line">        .ifdet2_reported = <span class="keyword">true</span>,            <span class="comment">/* Indicates if the IFDET2# signal is reported */</span></div><div class="line">        .perst_override_supported = <span class="keyword">true</span>,   <span class="comment">/* Indicates if the UBM Controller supports the DFC </span></div><div class="line"><span class="comment">                                               PERST# Management Override field in the Features Command */</span></div><div class="line">        .smb_reset_supported = <span class="keyword">true</span>,        <span class="comment">/* Indicates if the UBM Controller supports control over the DFC </span></div><div class="line"><span class="comment">                                               SMBRST# signals (e.g. See SFF-TA-1009) for all DFCs managed by the HFC */</span></div><div class="line">    },</div><div class="line">    .hfc_routing =</div><div class="line">    {</div><div class="line">        { .ubm_ctrl_slave_addr = 0x13 },    <span class="comment">/* UBM Controller 2Wire address HFC0 */</span></div><div class="line">        { .ubm_ctrl_slave_addr = 0x4D },    <span class="comment">/* UBM Controller 2Wire address HFC1 */</span></div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --> The first parameter requires configuring the Emulated EEPROM as a storage for FRU data. For more details, please refer to Em_EEPROM API manual. An example of the configuration: <div class="fragment"><div class="line"><span class="comment">/* The size of data to store in EEPROM. Note the flash size used will be</span></div><div class="line"><span class="comment"> * the closest multiple of the flash row size */</span></div><div class="line"><span class="preprocessor">#define DATA_SIZE                       (256)</span></div><div class="line"></div><div class="line"> <span class="comment">/* Simple Mode is turned on */</span></div><div class="line"><span class="preprocessor">#define SIMPLE_MODE                     (1u)</span></div><div class="line"></div><div class="line"><span class="comment">/* Increases the flash endurance by twice */</span></div><div class="line"><span class="preprocessor">#define WEAR_LEVELING                   (2u)</span></div><div class="line"></div><div class="line"><span class="comment">/* The Redundant Copy is turned off */</span></div><div class="line"><span class="preprocessor">#define REDUNDANT_COPY                  (0u)</span></div><div class="line"></div><div class="line"><span class="comment">/* The Blocking Write is turned on */</span></div><div class="line"><span class="preprocessor">#define BLOCKING_WRITE                  (1u)</span></div><div class="line"></div><div class="line">CY_ALIGN(CY_EM_EEPROM_FLASH_SIZEOF_ROW)</div><div class="line"><span class="keyword">const</span> uint8_t emEepromStorage[CY_EM_EEPROM_GET_PHYSICAL_SIZE(DATA_SIZE, SIMPLE_MODE, WEAR_LEVELING, REDUNDANT_COPY)] __attribute__((used, section(<span class="stringliteral">&quot;.cy_em_eeprom&quot;</span>))) = { 0u };</div><div class="line"></div><div class="line">cy_stc_eeprom_config_t eepromConfig =</div><div class="line">{</div><div class="line">    .eepromSize = DATA_SIZE,</div><div class="line">    .simpleMode = SIMPLE_MODE,</div><div class="line">    .wearLevelingFactor = WEAR_LEVELING,</div><div class="line">    .redundantCopy = REDUNDANT_COPY,</div><div class="line">    .blockingWrite = BLOCKING_WRITE,</div><div class="line">    .userFlashStartAddr = (uint32_t) &amp; (emEepromStorage[0u]),</div><div class="line">};</div></div><!-- fragment --> Then, set the the overview area parameters as desired. For the the parameters details, refer to the UBM Overview Area section in the <a href="https://members.snia.org/document/dl/27167">SFF-TA-1005</a> specification. An example of the configuration: <div class="fragment"><div class="line"><a class="code" href="group__group__ubm__fru__data__structures.html#structmtb__stc__ubm__fru__oa__config__t">mtb_stc_ubm_fru_oa_config_t</a> overview_area =</div><div class="line">{</div><div class="line">    .<a class="code" href="group__group__ubm__fru__data__structures.html#abd1bfe5c22ed1d00f4364fe5a3748570">two_wire_device_arrangement</a> = <a class="code" href="group__group__ubm__macros__fru__oa.html#ga574acb8b1ef0ee3e3de3a0e7eca857ff">MTB_UBM_FRU_OA_2WIRE_ARRANGEMENT_NO_MUX</a>,  <span class="comment">/* Two-wire device arrangement. */</span></div><div class="line">    .two_wire_mux_address = 0x00U,                                          <span class="comment">/* Two-wire mux adress. */</span></div><div class="line">    .two_wire_max_byte_count = <a class="code" href="group__group__ubm__macros__fru__oa.html#ga7c274d349bd809ee06d365986ee2b109">MTB_UBM_FRU_OA_2WIRE_MUX_BYTE_CNT_32BYTES</a>,    <span class="comment">/* Two-wire max byte count. */</span></div><div class="line">    .ubm_max_time_limit = 0x04U,                                            <span class="comment">/* Device max. time limit. */</span></div><div class="line">    .ubm_controller_features =</div><div class="line">    {</div><div class="line">        .read_checksum_creation = <span class="keyword">true</span>,                                     <span class="comment">/* Indicates whether to add the checksum to the read phase of the two wire transaction. */</span></div><div class="line">        .write_checksum_checking = <span class="keyword">true</span>,                                    <span class="comment">/* Indicates whether to verify the checksum on the write phase of the two wire transaction. */</span></div><div class="line">        .cprsnt_legacy_mode = <span class="keyword">false</span>,                                        <span class="comment">/* Indicates the behavior of the CPRSNT#/CHANGE_DETECT# signal. */</span></div><div class="line">        .pcie_reset_change_count_mask = <span class="keyword">false</span>,                              <span class="comment">/* Indicates if a change to the PCIe Reset field causes the Change Count field to increment. */</span></div><div class="line">        .drive_type_installed_change_count_mask = <span class="keyword">false</span>,                    <span class="comment">/* Indicates if a change to the Drive Type Installed field causes the Change Count field to increment. */</span></div><div class="line">        .operational_state_change_count_mask = <span class="keyword">false</span>,                       <span class="comment">/* Indicates if a change to the Operational State field causes the Change Count field to increment. */</span></div><div class="line">        .perst_management_override = 0x00,                                  <span class="comment">/* Indicates the DFC PERST# behavior when a Drive has been installed. */</span></div><div class="line">        .smbus_reset_control = <span class="keyword">false</span>                                        <span class="comment">/* Controls the DFC SMBRST# signal for all DFCs associated under the HFC. */</span></div><div class="line">    },</div><div class="line">    .maximum_power_per_dfc = 0x00U,                                         <span class="comment">/* Maximum power per DFC. */</span></div><div class="line">    .mux_channel_count = <a class="code" href="group__group__ubm__macros__fru__oa.html#gae0a95ca55238687dbd23e9821b87cf63">MTB_UBM_FRU_OA_2W_MUX_NO_MUX</a>,                       <span class="comment">/* Mux channel type. */</span></div><div class="line">    .enable_bit_location = <a class="code" href="group__group__ubm__macros__fru__oa.html#ga14fc990289da3748d088dc702e139e35">MTB_UBM_FRU_OA_2W_MUX_ENABLE_3CH_SEL</a>,             <span class="comment">/* Enable bit location. */</span></div><div class="line">    .mux_type = <a class="code" href="group__group__ubm__macros__fru__oa.html#gab97a6eba386e59eaaa47224c75d80f49">MTB_UBM_FRU_OA_2W_MUX_CH_ENABLE_LOC_CB</a>,                      <span class="comment">/* Mux type. */</span></div><div class="line">};</div></div><!-- fragment --> For the explanation of the Silicon Identity, Backplane Info and Capabilities parameters, refer to the corresponding section of the <a href="https://members.snia.org/document/dl/27167">SFF-TA-1005</a> specification. Also, you can set parameters related to the HPT0 signal support and starting slot in the configurational structure. <dl class="section note"><dt>Note</dt><dd>While this Beta release does not support the Port Route Descriptors it is required to configure the UBM controller 2wire address parameter.</dd></dl>
</li>
<li>The second parameter <a class="el" href="structmtb__stc__ubm__backplane__control__signals__t.html" title="Backplane control signals configuration structure. ">mtb_stc_ubm_backplane_control_signals_t</a> contains the GPIO definition for HFC and DFC IO signals. The number of elements of this configurational array should match the number of HFCs and the number of DFCs configured. This signal definitions are a combination of <a href="https://members.snia.org/document/dl/27167">SFF-TA-1005</a>, <a href="https://members.snia.org/document/dl/26489">SFF-8639</a>, <a href="https://members.snia.org/document/dl/26900">SFF-TA-1001</a>, <a href="https://members.snia.org/document/dl/26837">SFF-TA-1009</a>, <a href="https://webstore.ansi.org/standards/incits/ansiincits3762003">SAS</a> and <a href="https://sata-io.org/">SATA</a> standards. Change the pin settings to match your specifications. An example of the configuration: <div class="fragment"><div class="line"><a class="code" href="structmtb__stc__ubm__backplane__control__signals__t.html">mtb_stc_ubm_backplane_control_signals_t</a> ubm_backplane_control_signals =</div><div class="line">{</div><div class="line">    .<a class="code" href="structmtb__stc__ubm__backplane__control__signals__t.html#a075f25b6d5a606d1de0ea35d70cbc2ad">dfc_io</a> =</div><div class="line">    {</div><div class="line">        {.<a class="code" href="structmtb__stc__ubm__dfc__signals__t.html#a49e145b3ac37768f2d017e7598942738">ifdet</a> = P0_2, .ifdet2 = P0_3, .prsnt = P1_2, .actdetect = P1_3, .persta = P2_7, .perstb = P6_2, .pwrdis = P6_3, .refclken = P6_5, .dualporten = P8_0, .hpt0 = P12_6 },</div><div class="line">        {.ifdet = P12_7, .ifdet2 = P13_4, .prsnt = P13_5, .actdetect = P13_6, .persta = P2_0, .perstb = P2_1, .pwrdis = P2_2, .refclken = P2_4, .dualporten = P2_5, .hpt0 = P2_6 },</div><div class="line">    },</div><div class="line"></div><div class="line">    .hfc_io =</div><div class="line">    {</div><div class="line">        {.sda = P9_1, .scl = P9_0, .i2c_reset = P3_0, .change_detect = P3_1, .bp_type = P3_2, .perst = P3_3 },</div><div class="line">        {.sda = P10_1, .scl = P10_0, .i2c_reset = P3_4, .change_detect = P3_5, .bp_type = P4_0, .perst = P4_1 },</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --> <dl class="section warning"><dt>Warning</dt><dd>Do not use the selected IO pins elsewhere in the application. Verify that the selected IO pins are not used in the ModusToolbox&trade; Device Configurator. Otherwise this can lead to an unexpected behaviour of the application.</dd></dl>
</li>
<li>The third parameter mtb_stc_ubm_context_t contains internal middleware data structures and is not intended to be changed by the application. <dl class="section note"><dt>Note</dt><dd>Keep the context variable accessible during the whole application execution time.</dd></dl>
</li>
<li>At this step, your application configuration is complete to be built and programmed using the ModusToolbox&trade; software. </li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>UBM Middleware</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
